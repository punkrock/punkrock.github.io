<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>punkrock.github.io</title>
  <meta name="description" content="Ressources for mining, forging and validating. Vote for punkrock!">
  <meta name="author" content="punkrock">

<!-- <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

<style type="text/css">
	body {font-family: Arial, Helvetica, sans-serif;}
  .highlighted-div { background-color: #ecffcb; width: auto; padding: 20px; display: inline-block }
	.inner-pre {font-size: 18px; font-family: Arial, Helvetica, sans-serif; font-weight: bold;}
  .nohigh {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
  #update {
  background-color: #f0f0f0 ;
  padding: 10px ;
  border: 1px solid green ;
} 
</style>

</head>

<body>

  <pre>    ______  _   _  _   _  _   ________  _____  _____  _   __
    | ___ \| | | || \ | || | / /| ___ \|  _  |/  __ \| | / /
    | |_/ /| | | ||  \| || |/ / | |_/ /| | | || /  \/| |/ / 
    |  __/ | | | || . ` ||    \ |    / | | | || |    |    \ 
    | |    | |_| || |\  || |\  \| |\ \ \ \_/ /| \__/\| |\  \
    \_|     \___/ \_| \_/\_| \_/\_| \_| \___/  \____/\_| \_/
</pre>
<pre>---------------------------------------------------------------------------
<span class="inner-pre"><a href="https://punkrock.github.io">Home</a> | <a href="https://punkrock.github.io/lisk.html">Lisk</a></span>
---------------------------------------------------------------------------
</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1><strong>Lisk v3 Testnet on VPS with Ubuntu 20.04<br /><br /></strong></h1>

<h1>Summary</h1>
1. <a href="#step1">Create lisk user, install needed stuff</a><br>
2. <a href="#step2">Create your account</a><br>
3. <a href="#step3">Create a random 12-word passphrase and encrypt your account-passphrase</a><br>
4. <a href="#step4">Register your delegate and vote for yourself</a><br>
5. <a href="#step5">Start Lisk (if not running) and activate forging</a><br>
6. <a href="#update">How to update to a new version</a><br><br><br><br>

<h3 id="step1">STEP 1 - Create lisk user, install needed stuff</h3>
<code><span class="nohigh">~# </span>adduser lisk<br />
<span class="nohigh">~# </span>gpasswd -a lisk sudo<br />
<span class="nohigh">~# </span>su - lisk<br /><br />
<span class="nohigh">~$ </span>sudo apt-get -y update &amp;&amp; sudo apt-get -y upgrade &amp;&amp; sudo apt-get -y dist-upgrade &amp;&amp; sudo apt-get -y install wget tar zip unzip ufw htop nano npm git curl bash jq screen<br />
<span class="nohigh">~$ </span>sudo apt install -y build-essential</br>
<span class="nohigh">~$ </span>wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh | bash<br /><br></code>
<b>Now disconnect from your server (close your sesssion) and start a new session.</b><br><br />
<code><span class="nohigh">~$ </span>nvm install 12.22.1<br />
<span class="nohigh">~$ </span>npm install --global --production lisk-core<br />
<span class="nohigh">~$ </span>curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -<br />
<span class="nohigh">~$ </span>sudo apt-get install -y nodejs<br /><br /></code>
<b>Now start Lisk for the first time. This will create the folders ~/.lisk/lisk-core</b><br>
<code><span class="nohigh">~$ </span>screen -d -m -S lisk lisk-core start -n testnet<br><br></code>
<h3 id="step2">STEP 2 - Create your account</h3>
<code><p><span class="nohigh">~$ </span>lisk-core account:create</p></code>
<blockquote>
<p><span style="color: #008000;"><sup>[ { "passphrase": "monkey ... ... ... ... ... ... ... ... ... ... image", "privateKey": "fc7d6bdf...4e51155a", "publicKey": "c50da2f4e489d33d22ffd26192eddff5ed9e6aa08c4d5a4794c62b034e51155a", "binaryAddress": "<span style="background-color: #ffcc99;">cf05384d5707179ea691731726313e83a00dc6f4</span>", "address": "<span style="background-color: #ccffcc;">lskajvtut6wzj5ah4ky7o5roo4fu7uzsywkawa94w</span>" } ]<br /></sup></span></p>
</blockquote>
<p><em>Store the output and don't lose it.<br />You can now use the <a href="https://betanet5-faucet.lisk.io/" target="_blank" rel="noopener">Faucet for Testnet</a> (if not working try <a href="https://testnet-faucet.lisk.com/" target="_blank" rel="noopener">this link</a>) to get some betaLSK (enter <span style="background-color: #ccffcc;">your address</span>, not to the <span style="background-color: #ffcc99;">binaryAddress</span>).<br /></em></p>
<p>&nbsp;</p>
<h3 id="step3">STEP 3 - Create a random 12-word passphrase and encrypt your account-passphrase</h3>
<code><p><span class="nohigh">~$ </span>lisk-core account:create</p></code>
<p><em>You just need the 12 words. Don't lose them!</em></p>
<blockquote>
<p><span style="color: #008000;"><sup>pitch ... ... ... ... ... ... ... ... ... ... unusual</sup></span></p>
</blockquote>
<code><p><span class="nohigh">~$ </span>lisk-core passphrase:encrypt</p></code>
<blockquote>
<p><span style="color: #008000;"><sup>Please enter passphrase: monkey ... ... ... ... ... ... ... ... ... ... image</sup></span><br /><span style="color: #008000;"><sup>Please re-enter passphrase: monkey ... ... ... ... ... ... ... ... ... ... image</sup></span><br /><span style="color: #008000;"><sup>Please enter password: pitch ... ... ... ... ... ... ... ... ... ... unusual</sup></span><br /><span style="color: #008000;"><sup>Please re-enter password: pitch ... ... ... ... ... ... ... ... ... ... unusual</sup></span></p>
</blockquote>
<p><em><br />Copy and paste the output into a txt-file. You'll need parts of it for your config.json:<br /></em></p>
<blockquote>
<p><sup><span style="color: #008000;">{"encryptedPassphrase":"<span style="background-color: #ff99cc;">iterations=100.......version=1</span>"}</span></sup></p>
</blockquote>
<p>&nbsp;</p>
<p>Now you create the onion hashes file:</p>
<code><p><span class="nohigh">~$ </span>cd ~ &amp;&amp; lisk-core hash-onion -o hash_onion.json</p></code>
<p><br />Now you create a bash file:<br /><br />
<code><span class="nohigh">~$ </span>cd ~ &amp;&amp; nano create_config.sh</p></code>
<p>&nbsp;</p>
<p><em></em><em>Paste the following into the file and do NOT close it. You will replace the highlighted parts:</em></p>
<p></p>
<code><p>cd ~ &amp;&amp; &gt; ~/.lisk/lisk-core/config.json<br />ONION=$(cat ~/hash_onion.json)<br />cat &gt; ~/.lisk/lisk-core/config.json &lt;&lt; EOF_testnet_config<br />{<br />"logger": {<br />"fileLogLevel": "info"<br />},<br />"plugins": {<br />"httpApi": {<br />"whiteList": [<br />"127.0.0.1"<br />]<br />}<br />},<br />"forging": {<br />"delegates": [<br />{<br />"address": "<span style="background-color: #ffcc99;">binaryAddress</span>",<br />"encryptedPassphrase": "<span style="background-color: #ff99cc;">iterations=100............version=1</span>",<br />"hashOnion": $ONION<br />}<br />]<br />}<br />}<br />EOF_testnet_config</p></code>
<p></p>
<p><br /><em>Now remove the highlighted parts for address and encryptedPassphrase and replace them with the parts from the outputs you have generated above.<br /><br />Save and exit the create_config.sh file.<br /><br />Now you need to set the permissions to the file and execute it. This step will copy and paste the onion hashes into your config.json:<br /></em></p>
<code><p><span class="nohigh">~$ </span>chmod +x create_config.sh</p>
<p><span class="nohigh">~$ </span>./create_config.sh</p></code>
<p><br /><em>Now you check if the config.json is working correct. I am using screen, to keep it as simple as possible.<br>If you want to use PM2 instead of screen to manage your node, you can check out the <a href="https://github.com/Lemii/guides/blob/master/managing-the-lisk-core-process-with-pm2.md" target="_blank" rel="noopener">PM2-guide by lemii</a><br /></em></p>
<code><span class="nohigh">~$ </span>pkill screen
<p><span class="nohigh">~$ </span>screen -d -m -S lisk lisk-core start -n testnet -c ~/.lisk/lisk-core/config.json<br /><br />
  <em><span class="nohigh">~$ </span>screen -r</em></p></code>
<blockquote>
<p><sub><span style="color: #008000;">20:01:03 INFO lisk-framework: Starting the app - lisk-core (module=lisk:app)<br />20:01:03 INFO lisk-framework: If you experience any type of error, please open an issue on Lisk GitHub: https://github.com/LiskHQ/lisk-sdk/issues (module=lisk:app)<br />20:01:03 INFO lisk-framework: Contribution guidelines can be found at Lisk-sdk: https://github.com/LiskHQ/lisk-sdk/blob/development/docs/CONTRIBUTING.md (module=lisk:app)<br />20:01:03 INFO lisk-framework: Booting the application with Lisk Framework(3.0.0-beta.2.8362aa8) (module=lisk:app)<br />20:01:03 INFO lisk-framework: Initializing controller (module=lisk:app)<br />20:01:03 INFO lisk-framework: Loading controller (module=lisk:app)<br />20:01:03 INFO lisk-framework: Event * was subscribed but not registered to the bus yet. (module=lisk:app)<br />20:01:04 INFO lisk-framework: New block added to the chain (module=lisk:app)<br />{<br />"id": "5a92c178ca2125f358f61d2174fc5c5500f94ebf76da22165751cf3923003789",<br />"height": 0,<br />"numberOfTransactions": 0<br />} <br />20:01:04 INFO lisk-framework: Blockchain ready (module=lisk:app)<br />20:01:04 INFO lisk-framework: Node ready and launched (module=lisk:app)<br />20:01:07 INFO lisk-framework: Starting synchronizer (module=lisk:app)</span></sub></p>
</blockquote>
<p><em><br />If the output is like the one above, your config.json seems correct.<br /></em><em>If not, you have made mistakes when replacing the parts. Check again.<br> To detach from screen session correctly press CTRL+a+d<br /></em></p>
<p>&nbsp;</p>
<h3 id="step4">STEP 4 - Register your delegate and vote for yourself</h3>
<blockquote>
<p><span style="color: #000000;"><strong>Explainations</strong></span> <a href="https://i.imgur.com/cNWLgvW.jpg" target="_blank" rel="noopener">(All Lisk Module and Asset ID's)</a></p>
<ul>
<li><span style="color: #000000;"><strong>5:</strong> Module ID<br /></span></li>
<li><span style="color: #000000;"><strong>0:</strong> Asset ID<br /></span></li>
<li><span style="color: #000000;"><strong>1100000000:</strong> Registration fee in Beddows, including transaction fee (11 LSK)<br /></span></li>
<li><span style="color: #000000;"><strong>punkrock:</strong> Choose your username<br /></span></li>
</ul>
</blockquote>
<code><p><span style="color: #000000;"><span class="nohigh">~$ </span>lisk-core transaction:create 5 0 1100000000</span></p></code>
<blockquote>
<p><span style="color: #008000;"><sup>? Please enter: username: Choose your username<br />? Please enter passphrase: monkey ... ... ... ... ... ... ... ... ... ... image</sup></span><br /><span style="color: #008000;"><sup>? Please re-enter passphrase: monkey ... ... ... ... ... ... ... ... ... ... image</sup></span></p>
<p><sup><span style="color: #008000;">{"transaction":"<span style="background-color: #ccffff;">080510001800201...........3052578d1f88c3b38eaac1e48df2f3d67bb108</span>"}</span></sup></p>
</blockquote>
<p><em>Copy the output of the signed transaction and broadcast it:</em></p>
<code><p><span class="nohigh">~$ </span>lisk-core transaction:send <span style="background-color: #ccffff;">080510001800201...........3052578d1f88c3b38eaac1e48df2f3d67bb108</span></p></code>
<blockquote>
<p><sup><span style="color: #008000;">Transaction with id: '2cdcf658350427e8509385235f5ac429c01dbf77cda07bcb01f5504007e9ee3f' received by node</span></sup></p>
</blockquote>
<p><em>If it got accepted, your delegate name is registered.</em></p>
<p>&nbsp;</p>
<p><em>Now check your account balance and vote for yourself:</em></p>
<code><p><em><span class="nohigh">~$ </span>lisk-core account:get <span style="background-color: #ffcc99;">BinaryAddress</span></em></p></code>
<blockquote>
<p><sup><span style="color: #008000;">{"address":"cf05384d5707179ea691731726313e83a00dc6f4","token":{"balance":"1008999800000"},"sequence":{"nonce":"1"},"keys":{"numberOfSignatures":0,"mandatoryKeys":[],"optionalKeys":[]},"dpos":{"delegate":{"username":"punkrock","pomHeights":[],"consecutiveMissedBlocks":0,"lastForgedHeight":19128,"isBanned":false,"totalVotesReceived":"0"},"sentVotes":[],"unlocking":[]}}</span></sup></p>
</blockquote>
<p><em>The part "balance":"1008999800000 means you have 10089.998 LSK or 1008999800000 Beddows.</em><br /><em>Now vote for yourself with a big part of the balance. I will use 10060 LSK here:<br /><br /><strong><span style="color: #cc0000;">IMPORTANT: You can only use an amount in 10-LSK-steps! 10066 LSK not allowed. Only 10060 or 10070 for example.<br>And the amounts for fees and voting weight have to be entered in Beddows. 10060 LSK = 10060000000 Beddows</span></strong></em><br /><br /></p>
<p><span style="color: #000000;"><strong>Explainations</strong></span></p>
<ul>
<li><span style="color: #000000;"><strong>5:</strong> Module ID<br /></span></li>
<li><span style="color: #000000;"><strong>1:</strong> Asset ID<br /></span></li>
<li><span style="color: #000000;"><strong>100000000:</strong> Transaction fee<br /></span></li>
</ul>
<code><p><span class="nohigh">~$ </span><span style="color: #000000;">lisk-core transaction:create 5 1 100000000</span></p></code>
<blockquote>
<p><sup><span style="color: #008000;">? Please enter: votes(delegateAddress, amount): <span style="background-color: #ffcc99;">BinaryAddress</span>, 1006000000000<br />? Want to enter another votes(delegateAddress, amount) No<br />? Please enter passphrase: [hidden]<br />? Please re-enter passphrase: [hidden]<br />{"transaction":"0805100118022080c2.......73fac59318c51140dda8fcb9c6f26a913f05"}</span></sup></p>
</blockquote>
<p><em>Now copy the output of the signed message and broadcast it:</em></p>
<code><p><span class="nohigh">~$ </span>lisk-core transaction:send 0805100118022080c2.......73fac59318c51140dda8fcb9c6f26a913f05<br /></p></code>
<blockquote>
<p><sup><span style="color: #008000;">Transaction with id: '620518d6a7a8545b760da9ea44a8ac08b40929a8ca372074d774b787ac2bee9c' received by node.</span></sup></p>
<p>&nbsp;</p>
</blockquote>
<h3 id="step5">STEP 5 - Start Lisk (if not running) and activate forging</h3>
<p>Check if Lisk is running. If screen -r doesn't show Lisk logs, it's obviously not running and you need to start it again with the following command:</p>
<code><p><span class="nohigh">~$ </span>screen -d -m -S lisk lisk-core start -n testnet -c ~/.lisk/lisk-core/config.json<br /></p></code>
<p>Detach from the screen session with CTRL+a+d</p>
<code>
  <p><span class="nohigh">~$ </span>cd ~<br>
  <p><span class="nohigh">~$ </span>curl https://raw.githubusercontent.com/punkrock/LiskBeta/main/SH/lisk-enable-forging.sh -o ~/lisk-forge-enable.sh<br>
  <p><span class="nohigh">~$ </span>chmod 700 ~/lisk-forge-enable.sh<br>
  <p><span class="nohigh">~$ </span>./lisk-forge-enable.sh<br>
  </code>
  <br>
  <blockquote>
<p><sup><span style="color: #008000;">? Enter password to decrypt the encrypted passphrase: *******************************************<br />Forging status:<br />{"address":"<span style="background-color: #ffcc99;">BinaryAddress</span>","forging":true}</span></sup></p>
</blockquote>
<p>If the output says "forging":true, congratulations. You should forge on Testnet.<br /><br />To confirm you can always use lisk-core account:get <span style="background-color: #ffcc99;">BinaryAddress</span> to see if your balanace is increasing. Or you check logs for forged blocks with cat ~/.lisk/lisk-core/logs/lisk.log | grep "Forged new block" or wait for forged blocks with tail -f ~/.lisk/lisk-core/logs/lisk.log | grep "Forged new block".<br><br>

  <div id="update">
    <h1>How to update to a new version</h1>
    The stuff in this gray box is needed to update your testnet nodes:
    <p><b>Stop your node:</b></p>
    <code><p><span class="nohigh">~$ </span>screen -r (CTRL+c)
    <p><span class="nohigh">~$ </span>npm update -g lisk-core</code>
    <br>
  <p><b>If you get warnings about npm and/or nvm, try this:</b></p>
<code><p><span class="nohigh">~$ </span>nvm install 12.22.1
    <p><span class="nohigh">~$ </span>npm install -g npm<br><br><br></code>
    <p><b>Now restart your node:</b></p>
  <code><p><span class="nohigh">~$ </span>screen -d -m -S lisk lisk-core start -n testnet -c ~/.lisk/lisk-core/config.json<br /></p></code>
    <br>
    <p><em>If your machine doesn't find the command lisk-core, then add the following entry to your ~./profile:</em></p>
    <code><p><span class="nohigh">~$ </span>nano ~/.profile<br><br>
      Put the following line to the end of the file, save and start a new session:<br>
  <code><p>export PATH="$PATH:$HOME/.lisk/lisk-core/bin"<br><br><br></code>
    <p><b>Now enable forging</b></p>
<code>
<p><span class="nohigh">~$ </span>cd ~<br>
<p><span class="nohigh">~$ </span>curl https://raw.githubusercontent.com/punkrock/LiskBeta/main/SH/lisk-enable-forging.sh -o ~/lisk-forge-enable.sh<br>
<p><span class="nohigh">~$ </span>chmod 700 ~/lisk-forge-enable.sh<br>
<p><span class="nohigh">~$ </span>./lisk-forge-enable.sh<br>
</code>
<br>
<blockquote>
<p><sup><span style="color: #008000;">? Enter password to decrypt the encrypted passphrase: *******************************************<br />Forging status:<br />{"address":"<span style="background-color: #ffcc99;">BinaryAddress</span>","forging":true}</span></sup></p>
</blockquote>
</div> 
<br>

<h3>Ressources</h3>
<a title="Lisk v3 Testnet Explorer by moosty" href="https://testnet.liskscan.com/" target="_blank" rel="noopener">Lisk v3 Testnet Explorer by moosty</a> 
<br>
Happy forging!<br /><br>punkrock</h2>
  </body>
</html>